<div class="page-content">
  <!-- Profile Card -->
  <div class="dashboard-card">
    <div class="dashboard-card-header">
      <h2 class="dashboard-card-title">Profile Settings</h2>
    </div>
    <div class="dashboard-card-content">
      <!-- Loading State -->
      @if (isLoading) {
        <div class="dashboard-loading">
          <div class="dashboard-loading-text">Loading profile data...</div>
        </div>
      } @else {
        <!-- Error Message -->
        @if (errorMessage) {
          <div class="dashboard-error">
            <div class="dashboard-error-message">{{ errorMessage }}</div>
          </div>
        }

        <!-- Success Message -->
        @if (successMessage) {
          <div class="dashboard-success">
            <div class="dashboard-success-message">{{ successMessage }}</div>
          </div>
        }

        <form [formGroup]="profileForm" (ngSubmit)="onSave()" class="profile-form">
          <div class="profile-form-grid">
            <!-- Email Address -->
            <div class="custom-input-field">
              <label for="email" class="custom-input-label">Email Address</label>
              <input
                id="email"
                type="email"
                autocomplete="email"
                formControlName="email"
                placeholder="Enter your email"
                class="custom-input"
                [class.error]="email?.invalid && (email?.dirty || email?.touched)"
              />
              @if (email?.invalid && (email?.dirty || email?.touched)) {
                <div class="custom-input-error">
                  @if (email?.errors?.['required']) {
                    Email address is required
                  }
                  @if (email?.errors?.['email']) {
                    Please enter a valid email address
                  }
                </div>
              }
            </div>

            <!-- First Name -->
            <div class="custom-input-field">
              <label for="firstName" class="custom-input-label">First Name</label>
              <input
                id="firstName"
                type="text"
                autocomplete="given-name"
                formControlName="firstName"
                placeholder="First name"
                class="custom-input"
                [class.error]="firstName?.invalid && (firstName?.dirty || firstName?.touched)"
              />
              @if (firstName?.invalid && (firstName?.dirty || firstName?.touched)) {
                <div class="custom-input-error">
                  @if (firstName?.errors?.['required']) {
                    Required
                  }
                  @if (firstName?.errors?.['minlength']) {
                    Min 2 characters
                  }
                </div>
              }
            </div>

            <!-- Last Name -->
            <div class="custom-input-field">
              <label for="lastName" class="custom-input-label">Last Name</label>
              <input
                id="lastName"
                type="text"
                autocomplete="family-name"
                formControlName="lastName"
                placeholder="Last name"
                class="custom-input"
                [class.error]="lastName?.invalid && (lastName?.dirty || lastName?.touched)"
              />
              @if (lastName?.invalid && (lastName?.dirty || lastName?.touched)) {
                <div class="custom-input-error">
                  @if (lastName?.errors?.['required']) {
                    Required
                  }
                  @if (lastName?.errors?.['minlength']) {
                    Min 2 characters
                  }
                </div>
              }
            </div>

            <!-- Phone Number -->
            <div class="custom-input-field">
              <label for="phoneNumber" class="custom-input-label">Phone Number (Optional)</label>
              <input
                id="phoneNumber"
                type="tel"
                autocomplete="tel"
                formControlName="phoneNumber"
                placeholder="Enter your phone number (optional)"
                class="custom-input"
              />
            </div>

            <!-- Country -->
            <div class="custom-input-field">
              <label for="country" class="custom-input-label">Country (Optional)</label>
              <input
                id="country"
                type="text"
                formControlName="country"
                placeholder="Enter your country (optional)"
                class="custom-input"
              />
            </div>

            <!-- City -->
            <div class="custom-input-field">
              <label for="city" class="custom-input-label">City (Optional)</label>
              <input
                id="city"
                type="text"
                formControlName="city"
                placeholder="Enter your city (optional)"
                class="custom-input"
              />
            </div>

            <!-- Street -->
            <div class="custom-input-field">
              <label for="street" class="custom-input-label">Street Address (Optional)</label>
              <input
                id="street"
                type="text"
                formControlName="street"
                placeholder="Enter your street address (optional)"
                class="custom-input"
              />
            </div>

            <!-- Postal Code -->
            <div class="custom-input-field">
              <label for="postalCode" class="custom-input-label">Postal Code (Optional)</label>
              <input
                id="postalCode"
                type="text"
                formControlName="postalCode"
                placeholder="Enter your postal code (optional)"
                class="custom-input"
              />
            </div>

            <!-- Reset Password Option -->
            <div class="profile-password-section">
              <app-button
                materialIcon="lock_reset"
                [bg]="'transparent'"
                [bghover]="'gray_tone3'"
                [br]="'border'"
                [brhover]="'border'"
                [color]="'text_primary'"
                [colorhover]="'text_primary'"
                [opacity]="1"
                [opacityhover]="1"
                [width]="'auto'"
                [rounded]="false"
                [haveContent]="true"
                (clicked)="onResetPassword()"
                tooltip="Reset password via email"
              >
                Reset Password via Email
              </app-button>
            </div>
          </div>

          <!-- Save Button -->
          <div class="profile-form-actions">
            <app-button-loading
              [isLoading]="isSaving"
              [isDisabled]="profileForm.invalid || isSaving"
              type="submit"
              [bg]="'primary'"
              [bghover]="'primary_dark'"
              [color]="'white'"
              [colorhover]="'white'"
              [opacity]="profileForm.invalid || isSaving ? 0.5 : 1"
              [opacityhover]="1"
              [width]="'auto'"
              [rounded]="false"
              tooltip="Save changes"
            >
              {{ isSaving ? 'Saving...' : 'Save Changes' }}
            </app-button-loading>
          </div>
        </form>
      }
    </div>
  </div>
</div>

<div class="page-content" [appVisibilityMap]="visibilityByRoleMap">

  <!-- Content with padding -->
  <div>
    <!-- Quick Actions Row -->
    <div class="flex flex-wrap gap-4 justify-center dashboard-actions-row">
      <app-button role-visibility-name="add-team-button" [bg]="'primary'" [bghover]="'primary_dark'" [color]="'white'" [colorhover]="'white'"
        [materialIcon]="'group_add'" [haveContent]="true" (clicked)="openAddTeamModal()">
        Add Team
      </app-button>
      <app-button role-visibility-name="add-player-button" [bg]="'primary'" [bghover]="'primary_dark'" [color]="'white'" [colorhover]="'white'"
        [materialIcon]="'person_add'" [haveContent]="true" (clicked)="openAddPlayerModal()">
        Add Player
      </app-button>
      <app-button role-visibility-name="add-goalie-button" [bg]="'primary'" [bghover]="'primary_dark'" [color]="'white'" [colorhover]="'white'"
        [materialIcon]="'shield'" [haveContent]="true" (clicked)="openAddGoalieModal()">
        Add Goalie
      </app-button>
      <app-button role-visibility-name="add-game-button" [bg]="'primary'" [bghover]="'primary_dark'" [color]="'white'" [colorhover]="'white'"
        [materialIcon]="'sports_hockey'" [haveContent]="true" (clicked)="openAddGameModal()">
        Add Game
      </app-button>
      <app-button role-visibility-name="add-highlight-button" [bg]="'primary'" [bghover]="'primary_dark'" [color]="'white'" [colorhover]="'white'"
        [materialIcon]="'video_library'" [haveContent]="true" (clicked)="createHighlightReel()">
        Create Highlight Reel
      </app-button>
    </div>

    <!-- Main Content -->
    <!-- Current and Upcoming Games -->
    <div class="dashboard-section">
      <h2 class="dashboard-section-title">Current and Upcoming Games</h2>
      @if (loading()) {
        <app-game-card-skeleton></app-game-card-skeleton>
      } @else if (upcomingGames().length === 0) {
        <div class="dashboard-empty">
          <div class="empty-text">No current or upcoming games scheduled.</div>
        </div>
      } @else {
        <div class="dashboard-cards-container">
          @for (game of upcomingGames(); track game.id; let i = $index) {
            @if (i < 5) {
              <app-game-card
                [game]="game"
                [showActions]="false"
                [showScore]="false"
              />
            }
          }
        </div>
      }
    </div>

    <!-- Game Results -->
    <div class="dashboard-section">
      <h2 class="dashboard-section-title">Game Results</h2>
      @if (loading()) {
        <app-game-card-skeleton></app-game-card-skeleton>
      } @else if (gameResults().length === 0) {
        <div class="dashboard-empty">
          <div class="empty-text">No completed games found.</div>
        </div>
      } @else {
        <div class="dashboard-cards-container">
          @for (game of gameResults(); track game.id; let i = $index) {
            @if (i < 5) {
              <app-game-card
                [game]="game"
                [showActions]="false"
                [showScore]="true"
              />
            }
          }
        </div>
      }
    </div>
  </div>
</div>

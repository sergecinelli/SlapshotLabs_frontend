<div class="page-content" [appVisibilityMap]="visibilityByRoleMap">

  <!-- Content with padding -->
  <div>
    <!-- Quick Actions Row -->
    <div class="flex flex-wrap gap-4 justify-center dashboard-actions-row">
      <app-button role-visibility-name="add-team-button" [bg]="'primary'" [bghover]="'primary_dark'" [color]="'white'" [colorhover]="'white'"
        [materialIcon]="'group_add'" [haveContent]="true" (clicked)="openAddTeamModal()">
        Add Team
      </app-button>
      <app-button role-visibility-name="add-player-button" [bg]="'primary'" [bghover]="'primary_dark'" [color]="'white'" [colorhover]="'white'"
        [materialIcon]="'person_add'" [haveContent]="true" (clicked)="openAddPlayerModal()">
        Add Player
      </app-button>
      <app-button role-visibility-name="add-goalie-button" [bg]="'primary'" [bghover]="'primary_dark'" [color]="'white'" [colorhover]="'white'"
        [materialIcon]="'shield'" [haveContent]="true" (clicked)="openAddGoalieModal()">
        Add Goalie
      </app-button>
      <app-button role-visibility-name="add-game-button" [bg]="'primary'" [bghover]="'primary_dark'" [color]="'white'" [colorhover]="'white'"
        [materialIcon]="'sports_hockey'" [haveContent]="true" (clicked)="openAddGameModal()">
        Add Game
      </app-button>
      <app-button role-visibility-name="add-highlight-button" [bg]="'primary'" [bghover]="'primary_dark'" [color]="'white'" [colorhover]="'white'"
        [materialIcon]="'video_library'" [haveContent]="true" (clicked)="createHighlightReel()">
        Create Highlight Reel
      </app-button>
    </div>

    <!-- Main Content Grid -->
    @if (loading()) {
      <app-dashboard-skeleton></app-dashboard-skeleton>
    } @else {
    <div class="dashboard-grid-flex">
      <!-- Upcoming Games -->
      <div class="dashboard-card">
        <div class="dashboard-card-header">
          <h2 class="dashboard-card-title">Upcoming Games</h2>
        </div>
        <div class="dashboard-card-content">
            @if (upcomingGames().length === 0) {
          <div class="dashboard-empty">No upcoming games scheduled.</div>
          } @else {
          <div class="dashboard-game-list">
            @for (game of upcomingGames(); track game.id; let i = $index) {
                  @if (i < 5) {
                    <div class="dashboard-game-item">
              <div class="dashboard-game-content">
                <span class="dashboard-game-date">{{ game.date }} - {{ game.time }}</span>
                <div class="dashboard-team-info">
                  @if (game.awayTeamLogo) {
                  <img [src]="game.awayTeamLogo" [alt]="game.awayTeam" class="dashboard-team-logo" />
                  }
                          @if (game.awayTeamId) {
                            <a class="dashboard-team-name" (click)="goToTeamProfile(game.awayTeamId!)" [attr.href]="'/teams-and-rosters/teams/team-profile/' + game.awayTeamId">{{ game.awayTeam }}</a>
                          } @else {
                  <span class="dashboard-team-name">{{ game.awayTeam }}</span>
                          }
                </div>
                <span class="dashboard-game-separator">at</span>
                <div class="dashboard-team-info">
                  @if (game.homeTeamLogo) {
                  <img [src]="game.homeTeamLogo" [alt]="game.homeTeam" class="dashboard-team-logo" />
                  }
                          @if (game.homeTeamId) {
                            <a class="dashboard-team-name" (click)="goToTeamProfile(game.homeTeamId!)" [attr.href]="'/teams-and-rosters/teams/team-profile/' + game.homeTeamId">{{ game.homeTeam }}</a>
                          } @else {
                  <span class="dashboard-team-name">{{ game.homeTeam }}</span>
                          }
                </div>
              </div>
          </div>
          }
          }
        </div>
        }
      </div>
    </div>

    <!-- Game Results -->
    <div class="dashboard-card">
      <div class="dashboard-card-header">
        <h2 class="dashboard-card-title">Game Results</h2>
      </div>
      <div class="dashboard-card-content">
            @if (gameResults().length === 0) {
        <div class="dashboard-empty">No completed games found.</div>
        } @else {
        <div class="dashboard-game-list">
          @for (game of gameResults(); track game.id; let i = $index) {
                  @if (i < 5) {
                    <div class="dashboard-game-item">
            <div class="dashboard-game-content">
              <span class="dashboard-game-date">{{ game.date }} - {{ game.time }}</span>
              <div class="dashboard-team-info">
                @if (game.awayTeamLogo) {
                <img [src]="game.awayTeamLogo" [alt]="game.awayTeam" class="dashboard-team-logo" />
                }
                          @if (game.awayTeamId) {
                            <a class="dashboard-team-name" (click)="goToTeamProfile(game.awayTeamId!)" [attr.href]="'/teams-and-rosters/teams/team-profile/' + game.awayTeamId">{{ game.awayTeam }}</a>
                          } @else {
                <span class="dashboard-team-name">{{ game.awayTeam }}</span>
                          }
                <span class="dashboard-score">{{ game.awayGoals }}</span>
              </div>
              <span class="dashboard-game-separator">at</span>
              <div class="dashboard-team-info">
                @if (game.homeTeamLogo) {
                <img [src]="game.homeTeamLogo" [alt]="game.homeTeam" class="dashboard-team-logo" />
                }
                          @if (game.homeTeamId) {
                            <a class="dashboard-team-name" (click)="goToTeamProfile(game.homeTeamId!)" [attr.href]="'/teams-and-rosters/teams/team-profile/' + game.homeTeamId">{{ game.homeTeam }}</a>
                          } @else {
                <span class="dashboard-team-name">{{ game.homeTeam }}</span>
                          }
                <span class="dashboard-score">{{ game.homeGoals }}</span>
              </div>
            </div>
        </div>
        }
        }
      </div>
      }
    </div>
  </div>
      </div>
    }
</div>
</div>
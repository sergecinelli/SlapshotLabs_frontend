<div class="flex h-screen">
  <!-- Left Navigation Panel -->
  <div class="w-64 flex flex-col">
    <!-- Logo Section -->
    <div class="py-8 border-b bg-white">
      <div class="flex items-center space-x-3">
        <img
          src="assets/logo.png"
          fetchpriority="high"
          loading="eager"
          alt="Hockey Baseball App"
          class="rounded-lg mx-auto"
        />
      </div>
    </div>

    <!-- Navigation Menu -->
    <nav>
      @for (item of navigationItems(); track item.path) {
        <div>
          <!-- Main Navigation Item -->
          <button
            (click)="navigate(item.path)"
            [class.gamesheet]="item.path === '/gamesheet'"
            [class]="
              'flex items-center justify-between w-full px-4 py-3 text-sm transition-colors duration-200 text-left bg-transparent border-none cursor-pointer ' +
              (isActive(item.path) || isParentActive(item)
                ? 'text-custom-primary font-semibold active'
                : 'text-custom-dark hover:text-custom-primary font-medium')
            "
          >
            <div class="flex items-center space-x-3 flex-1">
              @if (item.icon) {
                <img
                  [src]="getIconPath(item.icon)"
                  [alt]="item.label + ' icon'"
                  [class]="
                    'w-5 h-5 nav-icon ' +
                    (isActive(item.path) || isParentActive(item) ? 'active' : '')
                  "
                />
              }
              <span>{{ item.label }}</span>
            </div>
            @if (item.children) {
              <svg
                (click)="toggleSubmenu(item); $event.stopPropagation()"
                (keyup.enter)="toggleSubmenu(item); $event.stopPropagation()"
                (keyup.space)="toggleSubmenu(item); $event.stopPropagation()"
                [class]="
                  'w-4 h-4 transition-transform duration-200 cursor-pointer flex-shrink-0 ml-2 ' +
                  (isActive(item.path) || isParentActive(item)
                    ? 'text-custom-primary'
                    : 'text-custom-secondary hover:text-custom-primary')
                "
                [style.transform]="item.expanded ? 'rotate(90deg)' : 'rotate(0deg)'"
                tabindex="0"
                role="button"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                />
              </svg>
            }
          </button>

          <!-- Submenu -->
          @if (item.children && item.expanded) {
            <div class="ml-6 mt-1 space-y-1 border-l border-gray-300 pl-4">
              @for (child of item.children; track child.path) {
                <button
                  (click)="navigate(child.path)"
                  [class]="
                    'w-full px-4 py-2 text-sm transition-colors duration-200 text-left bg-transparent border-none cursor-pointer ' +
                    (isActive(child.path)
                      ? 'text-custom-primary font-semibold active'
                      : 'text-custom-dark hover:text-custom-primary font-medium')
                  "
                >
                  <div class="flex items-center space-x-3">
                    @if (child.icon) {
                      <img
                        [src]="getIconPath(child.icon)"
                        [alt]="child.label + ' icon'"
                        [class]="'w-4 h-4 submenu-icon ' + (isActive(child.path) ? 'active' : '')"
                      />
                    }
                    <span>{{ child.label }}</span>
                  </div>
                </button>
              }
            </div>
          }
        </div>
      }
    </nav>
  </div>

  <!-- Main Content Area -->
  <div class="flex-1 flex flex-col overflow-hidden">
    <!-- Header -->
    <header class="bg-white h-[120px] flex justify-between">
      <div class="flex w-full h-full">
        <!-- Live banner: horizontally scrollable -->
        <div
          class="flex-1 min-w-0 flex items-center bg-white px-6 py-0 overflow-x-auto no-scrollbar"
        >
          <app-live-banner class="w-full min-w-max"></app-live-banner>
        </div>
        <!-- Right: Support / Alerts / Logout, fixed width -->
        <div
          class="flex items-center justify-end bg-white pr-6 py-6"
          style="min-width: 260px; max-width: 270px; flex: 0 0 270px"
        >
          <div class="flex items-center space-x-6 my-auto">
            <a
              href="#"
              class="flex items-center space-x-2 text-custom-secondary hover:text-custom-dark font-medium text-sm"
            >
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192L5.636 18.364M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"
                />
              </svg>
              <span>Support</span>
            </a>
            <a
              href="#"
              class="flex items-center space-x-2 text-custom-secondary hover:text-custom-dark font-medium text-sm"
            >
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 17h5l-5 5v-5zM9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
              <span>Alerts</span>
            </a>
            <button
              (click)="logout()"
              class="flex items-center space-x-2 text-custom-primary hover:text-red-800 font-medium text-sm bg-transparent border-none cursor-pointer"
            >
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                />
              </svg>
              <span>Logout</span>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Page Content -->
    <main class="flex-1 overflow-x-hidden overflow-y-auto p-6 pt-0 mt-0">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>

<div class="highlight-reel-view-modal">
  <h2 mat-dialog-title class="modal-title">
    <span class="material-symbols-rounded title-icon">play_circle</span>
    View Highlight Reel â€” {{ data.reelName }}
  </h2>

  <mat-dialog-content class="modal-content">
    <div class="two-column-layout">
      <!-- LEFT: YouTube Player -->
      <div class="column left">
        <div class="video-wrapper" *ngIf="videoUrl(); else noVideo">
          <iframe
            class="video-iframe"
            [src]="videoUrl()"
            title="Highlight video"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen
          >
          </iframe>
        </div>
        <ng-template #noVideo>
          <div class="no-video">
            <span class="material-symbols-rounded">info</span>
            <p>{{ videoMessage() || 'Select a highlight on the right to play' }}</p>
          </div>
        </ng-template>
      </div>

      <!-- RIGHT: Reused Selected Events Table (read-only, clickable rows) -->
      <div class="column right selected-events-table">
        <div *ngIf="highlights().length === 0" class="empty-state">
          <span class="material-symbols-rounded">info</span>
          <p>No highlights in this reel.</p>
        </div>

        <div *ngIf="highlights().length > 0" class="table-wrapper">
          <table class="w-full">
            <thead>
              <tr class="custom-header">
                <th class="header-cell">Name</th>
                <th class="header-cell">Description</th>
                <th class="header-cell">Date</th>
                <th class="header-cell">Time</th>
              </tr>
            </thead>
            <tbody>
              <tr
                class="table-row cursor-pointer"
                *ngFor="let h of highlights(); let i = index"
                (click)="onRowClick(i)"
                [class.selected-row]="i === selectedIndex()"
              >
                <td class="table-cell">{{ h.event_name || '-' }}</td>
                <td class="table-cell">{{ h.note || '-' }}</td>
                <td class="table-cell">{{ formatDate(h.date, h.time) }}</td>
                <td class="table-cell">{{ formatPeriodTime(h.time, h.date) }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </mat-dialog-content>

  <mat-dialog-actions class="modal-actions">
    <app-button
      [bg]="'transparent'"
      [bghover]="'button_background'"
      [br]="'border'"
      [color]="'text_primary'"
      [colorhover]="'text_primary'"
      [opacity]="1"
      [opacityhover]="1"
      [width]="'auto'"
      [rounded]="false"
      [haveContent]="true"
      (clicked)="close()"
    >
      Close
    </app-button>
  </mat-dialog-actions>
</div>

<div class="schedule-form-modal">
  <h2 mat-dialog-title class="modal-title">
    <mat-icon class="title-icon">event</mat-icon>
    {{ isEditMode ? 'Edit Game' : 'Add Game' }}
  </h2>

  <mat-dialog-content class="modal-content">
    <div *ngIf="isLoading" class="loading-container">
      <p>Loading form data...</p>
    </div>
    
    <form *ngIf="!isLoading" [formGroup]="scheduleForm" class="schedule-form">
      
      <!-- Game Information -->
      <div class="form-section">
        <div class="section-header">
          <span class="section-title">Game Information</span>
        </div>
        <mat-divider class="section-divider"></mat-divider>
        
        <div class="form-row">
          <mat-form-field [floatLabel]="'always'" [hideRequiredMarker]="true" class="form-field">
            <mat-label class="uppercase text-custom-secondary">Visiting Team</mat-label>
            <mat-select formControlName="visitingTeam">
              <mat-option *ngFor="let option of teamOptions" [value]="option.value">
                {{ option.label }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="scheduleForm.get('visitingTeam')?.errors && scheduleForm.get('visitingTeam')?.touched">
              {{ getErrorMessage('visitingTeam') }}
            </mat-error>
          </mat-form-field>

          <mat-form-field [floatLabel]="'always'" [hideRequiredMarker]="true" class="form-field">
            <mat-label class="uppercase text-custom-secondary">Home Team</mat-label>
            <mat-select formControlName="homeTeam">
              <mat-option *ngFor="let option of teamOptions" [value]="option.value">
                {{ option.label }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="scheduleForm.get('homeTeam')?.errors && scheduleForm.get('homeTeam')?.touched">
              {{ getErrorMessage('homeTeam') }}
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field [floatLabel]="'always'" [hideRequiredMarker]="true" class="form-field full-width">
            <mat-label class="uppercase text-custom-secondary">Start Time</mat-label>
            <input matInput type="datetime-local" formControlName="startTime">
            <mat-error *ngIf="scheduleForm.get('startTime')?.errors && scheduleForm.get('startTime')?.touched">
              {{ getErrorMessage('startTime') }}
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- Venue Information -->
      <div class="form-section">
        <div class="section-header">
          <span class="section-title">Venue Information</span>
        </div>
        <mat-divider class="section-divider"></mat-divider>
        
        <div class="form-row">
          <mat-form-field [floatLabel]="'always'" [hideRequiredMarker]="true" class="form-field">
            <mat-label class="uppercase text-custom-secondary">Arena</mat-label>
            <mat-select formControlName="arena" (selectionChange)="onArenaChange($event.value)">
              <mat-option *ngFor="let option of arenaOptions" [value]="option.value">
                {{ option.label }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="scheduleForm.get('arena')?.errors && scheduleForm.get('arena')?.touched">
              {{ getErrorMessage('arena') }}
            </mat-error>
          </mat-form-field>

          <mat-form-field [floatLabel]="'always'" [hideRequiredMarker]="true" class="form-field">
            <mat-label class="uppercase text-custom-secondary">Rink</mat-label>
            <mat-select formControlName="rink">
              <mat-option *ngFor="let option of rinkOptions" [value]="option.value">
                {{ option.label }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="scheduleForm.get('rink')?.errors && scheduleForm.get('rink')?.touched">
              {{ getErrorMessage('rink') }}
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- Game Details -->
      <div class="form-section">
        <div class="section-header">
          <span class="section-title">Game Details</span>
        </div>
        <mat-divider class="section-divider"></mat-divider>
        
        <div class="form-row">
          <mat-form-field [floatLabel]="'always'" [hideRequiredMarker]="true" class="form-field">
            <mat-label class="uppercase text-custom-secondary">Game Type</mat-label>
            <mat-select formControlName="gameType">
              <mat-option *ngFor="let option of gameTypeOptions" [value]="option.value">
                {{ option.label }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="scheduleForm.get('gameType')?.errors && scheduleForm.get('gameType')?.touched">
              {{ getErrorMessage('gameType') }}
            </mat-error>
          </mat-form-field>

          <mat-form-field [floatLabel]="'always'" [hideRequiredMarker]="true" class="form-field">
            <mat-label class="uppercase text-custom-secondary">Status</mat-label>
            <mat-select formControlName="status">
              <mat-option *ngFor="let option of statusOptions" [value]="option.value">
                {{ option.label }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="scheduleForm.get('status')?.errors && scheduleForm.get('status')?.touched">
              {{ getErrorMessage('status') }}
            </mat-error>
          </mat-form-field>
        </div>
      </div>

    </form>
  </mat-dialog-content>

  <mat-dialog-actions class="modal-actions">
    <button mat-stroked-button (click)="onCancel()" class="cancel-btn">
      Cancel
    </button>
    <button 
      mat-raised-button 
      color="primary" 
      (click)="onSubmit()" 
      class="submit-btn"
      [disabled]="isLoading || scheduleForm.invalid">
      <mat-icon>save</mat-icon>
      {{ isEditMode ? 'Update Game' : 'Add Game' }}
    </button>
  </mat-dialog-actions>
</div>